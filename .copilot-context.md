# Dendy Joystick USB HID Gamepad

## Hardware Description

Bluepill board based on STM32F103C8T6 microcontroller. The project implements a USB HID device using libopencm3 that simulates a gamepad with digital buttons only (no analog axes).

## Pin Mapping

### D-Pad Buttons

- **DPad Up**: PA0 (BUTTON_UP_PIN)
- **DPad Down**: PA1 (BUTTON_DOWN_PIN)
- **DPad Left**: PA2 (BUTTON_LEFT_PIN)
- **DPad Right**: PA3 (BUTTON_RIGHT_PIN)

### Action Buttons

- **Select**: PA4 (BUTTON_SELECT_PIN)
- **Start**: PA5 (BUTTON_START_PIN)
- **Button A**: PA6 (BUTTON_A_PIN)
- **Button B**: PA7 (BUTTON_B_PIN)

### Turbo Buttons

- **Turbo A**: PB0 (BUTTON_TURBO_A_PIN)
- **Turbo B**: PB1 (BUTTON_TURBO_B_PIN)

### Power/Ground

- **COMMON GROUND**: Connect to any GND pin on BluePill

## Hardware Configuration

- All buttons should connect to GND when pressed (active low configuration)
- Internal pull-up resistors are enabled in firmware
- No external resistors required

## Turbo Functionality

- Turbo A and Turbo B buttons are "rapid fire" buttons that control Button A and Button B
- **Physical buttons**: 10 total (8 regular + 2 turbo)
- **HID buttons**: 8 logical buttons (turbo buttons do not appear in HID descriptor)
- When Turbo A (PB0) is held: Button A fires at 15Hz rapid rate
- When Turbo B (PB1) is held: Button B fires at 15Hz rapid rate
- Turbo rate: 15 Hz (66ms period, 33ms on/off cycle)
- Turbo buttons can be used simultaneously
- From USB perspective: only 8 buttons exist (A, B, Select, Start, Up, Down, Left, Right)

## USB Device Information

- **VID**: 0x1209 (pid.codes)
- **PID**: 0x0001 (Test PID)
- **Product Name**: "DendyJoystick"
- **Serial Number**: "DN001"
- **Report Rate**: 1ms intervals (state-change detection for ultra-low latency)
- **HID Report Size**: 2 bytes (8 buttons + 8 bits padding)

## Compatibility

- Perfect for NES emulators like RetroArch
- Recognized as standard USB HID gamepad
- Works with any system supporting USB HID devices
- Digital button layout ideal for retro gaming
